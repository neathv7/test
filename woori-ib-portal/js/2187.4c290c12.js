"use strict";(self["webpackChunkbizMOB4Vue"]=self["webpackChunkbizMOB4Vue"]||[]).push([[2187],{29641:function(e,t,s){var o=s(82482);class d{constructor(){(0,o.Z)(this,"disabledState",void 0),(0,o.Z)(this,"copyOptions",((e,t)=>{for(const s in e)t[s]&&"object"===typeof e[s]?this.copyOptions(e[s],t[s]):t[s]=e[s]})),(0,o.Z)(this,"recCallNodes",((e,t,s,o=[])=>{if(void 0===s)return;const d=o.shift();s.forEach((s=>{if(void 0!==d&&d!==s.id)return;const n=this.disabledState[t];if(d===s.id&&0===o.length)return s.state[t]=e,void(s.state.indeterminate=!!e&&!e);n&&!1!==s[n]&&(s.state[t]=e,s.state.indeterminate=!!e&&!e),this.recCallNodes(e,t,s.nodes,o)}))})),(0,o.Z)(this,"checkAllNodes",(e=>{this.recCallNodes(!0,"checked",e)})),(0,o.Z)(this,"uncheckAllNodes",(e=>{this.recCallNodes(!1,"checked",e)})),(0,o.Z)(this,"recFindNodePath",((e,t,s,o)=>{let d=[];return t.forEach((t=>{let n=[];return e===t.id&&o>=s?(d.unshift(t.id),!1):t.nodes&&o>s&&null!=(n=this.recFindNodePath(e,t.nodes,s+1,o))&&n.length>0?(n.unshift(t.id),d=n,!1):void 0})),d})),(0,o.Z)(this,"findNodePath",((e,t,s=9999)=>this.recFindNodePath(t,e,1,s))),(0,o.Z)(this,"recFindNode",((e,t,s,o)=>{let d=null;return t.forEach((t=>{let n;return e===t.id&&o>=s?(d=t,!1):t.nodes&&o>s&&null!=(n=this.recFindNode(e,t.nodes,s+1,o))?(d=n,!1):void 0})),d})),(0,o.Z)(this,"findNode",((e,t,s=9999)=>""===t?null:this.recFindNode(t,e,1,s))),(0,o.Z)(this,"doCheckNode",((e,t,s,o=9999)=>{const d=this.findNode(e,t,o);d&&(d.state.checked=s,this.recCallNodes(s,"checked",d.nodes))})),(0,o.Z)(this,"deselectAllNodes",(e=>{void 0!==e&&e.forEach((e=>{e.state.selected=!1,e.nodes&&this.deselectAllNodes(e.nodes)}))})),(0,o.Z)(this,"selectNodeAt",((e,t)=>{void 0!==e&&void 0!==t&&e.forEach((e=>{t.id===e.id?e.state.selected=!0:e.state.selected=!1,e.nodes&&this.selectNodeAt(e.nodes,t)}))})),(0,o.Z)(this,"expandAllNodes",(e=>{this.recCallNodes(!0,"expanded",e)})),(0,o.Z)(this,"collapseAllNodes",(e=>{this.recCallNodes(!1,"expanded",e)})),(0,o.Z)(this,"collapseNodeAt",((e,t,s=9999)=>{const o=this.findNode(e,t,s);o&&(o.state.expanded=!1)})),(0,o.Z)(this,"expandNodeAt",((e,t)=>{if(!e||0===e.length)return;const s=e;this.recCallNodes(!0,"expanded",t,s)})),(0,o.Z)(this,"getNode",((e,t)=>this.findNode(e,t))),(0,o.Z)(this,"recFindNodeByKey",((e,t,s,o,d)=>{let n=null;return t.forEach((t=>{let i;const c="string"===typeof t[s]?e.toLowerCase():e,l="string"===typeof t[s]?t[s].toLowerCase():t[s],r=c.replace(/\s/g,""),a=l.replace(/[\s:]/g,"");return a.includes(r)&&d>=o?(n=t,!1):t.nodes&&d>o&&null!=(i=this.recFindNodeByKey(e,t.nodes,s,o+1,d))?(n=i,!1):void 0})),n})),(0,o.Z)(this,"findNodeByKey",((e,t,s,o=9999)=>""===t?null:this.recFindNodeByKey(t,e,s,1,o))),(0,o.Z)(this,"getNodeByKey",((e,t,s)=>this.findNodeByKey(e,t,s))),(0,o.Z)(this,"recGetNodesData",((e,t,s)=>{let o=[];return void 0===s||s.forEach((s=>{s.state&&Object.keys(s.state).filter((e=>t[e]===s.state[e])).length===Object.keys(t).length&&(Array.isArray(e)?o.push(Object.keys(s).filter((t=>e.includes(t))).reduce(((e,t)=>(e[t]=s[t],e)),{})):o.push(s[e])),o=o.concat(this.recGetNodesData(e,t,s.nodes))})),o})),(0,o.Z)(this,"recGetNodesDataWithFormat",((e,t,s)=>{const o={};return void 0===s||0===s.length||s.forEach((s=>{s.state&&Object.keys(s.state).filter((e=>t[e]===s.state[e])).length===Object.keys(t).length?o[s.id]=this.recGetNodesDataWithFormat(e,t,s.nodes):Object.assign(o,this.recGetNodesDataWithFormat(e,t,s.nodes))})),o})),(0,o.Z)(this,"getNodesData",((e,t,s={},o=!1)=>!1===o?this.recGetNodesData(t,s,e):this.recGetNodesDataWithFormat(t,s,e))),(0,o.Z)(this,"returnNodeData",(e=>{let t=[];return e.nodes&&(this.returnNodeData(e.nodes),t=e.nodes.filter((e=>e.state.checked))),t})),(0,o.Z)(this,"getCheckedNodes",((e,t,s=!1)=>this.getNodesData(e,t,{checked:!0},s))),(0,o.Z)(this,"getCheckedPath",(e=>{let t=[];return void 0===e?t:(e.forEach((({...e})=>{(e.state.checked||e.state.indeterminate)&&(e.state.indeterminate&&e.nodes&&(e.nodes=this.getCheckedPath(e.nodes)),t=t.concat(e))})),JSON.parse(JSON.stringify(t)))})),(0,o.Z)(this,"getIndeterminateNodes",((e,t,s=!1)=>this.getNodesData(e,t,{indeterminate:!0},s))),(0,o.Z)(this,"getExpandedNodes",((e,t,s=!1)=>this.getNodesData(e,t,{expanded:!0},s))),(0,o.Z)(this,"recGetVisibleNodes",((e,t,s)=>{e.push(s?t:t.id),!0===t.state.expanded&&t.nodes&&t.nodes.forEach((t=>{this.recGetVisibleNodes(e,t,s)}))})),(0,o.Z)(this,"getVisibleNodes",((e,t=!1)=>{const s=[];return e.forEach((e=>{this.recGetVisibleNodes(s,e,t)})),s})),this.disabledState={expanded:"expandable",checked:"checkable",selected:"selectable"}}transformIntoTreeData(e,t,s,o,d){const n=[...e],i={},c=[];for(let l=0;l<n.length;l++)i[n[l][t]]=l,n[l]={...n[l],nodes:[],text:n[l][o],id:n[l][t],state:n[l].state?n[l].state:{indeterminate:!1,checked:!1,selected:!1,expanded:!1,highLightParentNode:!1},subtext:d?n[l][d]:""};for(let l=0;l<n.length;l++){const e=n[l][s].replace(/\s/g,"");if(""===e)c.push(n[l]);else{const t=i[e];void 0!==t&&null!==t&&n[t].nodes.push(n[l])}}return c}transformIntoTreeServiceRole(e,t,s,o){const d=[...e],n={},i=[];for(let c=0;c<d.length;c++)n[d[c][t]]=c,d[c]={...d[c],nodes:[],text:d[c].userRoleName?d[c][t]+": "+d[c][o]:(d[c].userID?d[c].userID+": ":"")+(d[c].userName?d[c].userName+" ":"")+(d[c].branchName?"("+d[c].branchName+")":"")+(d[c].serviceID?d[c].serviceID:"")+(d[c].serviceIDName?": "+d[c].serviceIDName:""),id:""==d[c][t]?this.onGenerateUIDKey():d[c][t],state:d[c].state?d[c].state:{indeterminate:!1,checked:!1,selected:!1,expanded:!1,highLightParentNode:!1}};for(let c=0;c<d.length;c++){const e=d[c][s];if(""===e)i.push(d[c]);else{const t=n[e];void 0!=t&&null!=t&&d[t].nodes.push(d[c])}}return i}onGenerateUIDKey(){const e=Math.floor(1e5*Math.random());return e}}t["Z"]=d},12187:function(e,t,s){s.d(t,{Z:function(){return P}});var o=s(66252),d=s(49963),n=s(3577);const i=["id"],c={class:"flex_ui"},l={class:"row gap10"},r={class:"col"},a={class:"inp_box search search_inp"},h={class:"inp"},u={class:"col auto"},p={class:""},N={class:"flex_cont type02"};function g(e,t){const s=(0,o.up)("ion-input"),g=(0,o.up)("ion-button"),y=(0,o.up)("TreeRow");return(0,o.wg)(),(0,o.iD)("div",{id:e.id,class:"flex_column"},[(0,o._)("div",c,[(0,o._)("div",l,[(0,o._)("div",r,[(0,o._)("div",a,[(0,o._)("div",h,[e.filterable?((0,o.wg)(),(0,o.j4)(s,{key:0,class:"line",placeholder:e.filterPlaceholder,modelValue:e.searchValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchValue=t),onKeypress:(0,d.D2)(e.handleSearch,["enter"]),readonly:e.isDisabledSearch},null,8,["placeholder","modelValue","onKeypress","readonly"])):(0,o.kq)("",!0)])])]),(0,o._)("div",u,[(0,o.Wm)(g,{disabled:e.isDisabledSearch,class:"btn01",onClick:t[1]||(t[1]=t=>e.handleSearch())},{default:(0,o.w5)((()=>[(0,o._)("span",p,(0,n.zw)(e.$t("common.search")),1)])),_:1},8,["disabled"])])])]),(0,o._)("div",N,[(0,o._)("ul",{style:(0,n.j5)(e.styles.tree.style),class:"tree_list",id:"tree_active"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.nodes,(t=>((0,o.wg)(),(0,o.j4)(y,{ref_for:!0,ref:"tree-row-"+t.id,"custom-styles":e.customStyles,"hightlight-current":e.hightlightCurrent,"hightlight-current-color":e.hightlightCurrentColor,"show-checkbox":e.showCheckbox,depth:1,key:t.id,node:t,"parent-node":t,"node-path":t,icons:e.icons,classIcon:e.classIcon,subIcon:e.subIcon,"isDisabled-CheckBox":e.isDisabledCheckBox,"position-collapse-icon":e.positionCollapseIcon,onEmitNodeChecked:e.onNodeChecked,onEmitNodeExpanded:e.onNodeExpanded,onEmitNodeSelected:e.onNodeSelected,onEmitDblClick:e.onDblClick},null,8,["custom-styles","hightlight-current","hightlight-current-color","show-checkbox","node","parent-node","node-path","icons","classIcon","subIcon","isDisabled-CheckBox","position-collapse-icon","onEmitNodeChecked","onEmitNodeExpanded","onEmitNodeSelected","onEmitDblClick"])))),128))],4)])],8,i)}const y=["data-id"],f={key:0,class:"tree_ico_left"},m={key:1,class:"tree_ico_left"},k={key:0},x=["title"],C={key:0},b={key:1,class:"item"},v=["title"],I={key:0,class:"tree_ico"},w={key:0,class:"tree_ico_right"},D={key:1,class:"tree_ico_right"},_={key:0};function S(e,t){const s=(0,o.up)("TreeRow",!0);return(0,o.wg)(),(0,o.iD)("li",{class:"node tree_item","data-id":e.currentNode.id,style:(0,n.j5)(e.styles.row.style)},[(0,o._)("div",{class:(0,n.C_)(["row_data",e.selected?e.styles.row.child.active.class:e.styles.row.child.class]),style:(0,n.j5)(e.selected?e.styles.row.child.active.style:e.styles.row.child.style),onClick:t[3]||(t[3]=t=>e.toggleEvent("selected",e.currentNode)),onDblclick:t[4]||(t[4]=t=>e.onDblClick(e.currentNode,e.parentNode))},["left"===e.positionCollapseIcon?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,n.C_)(["item",{active:e.currentNode.state.highLightParentNode||e.selected&&void 0==e.currentNode.isTempNewMenu&&void 0==e.currentNode.isTempNewRole}])},[(0,o._)("div",{onClick:t[0]||(t[0]=(0,d.iM)((t=>void 0!=e.currentNode.nodes&&e.currentNode.nodes.length>0&&e.toggleEvent("expanded",e.currentNode)),["stop"]))},[void 0!=e.currentNode.nodes&&e.currentNode.nodes.length>0||""==e.currentNode.parentUserRoleID||""==e.currentNode.parentMenuID?((0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("i",null,[(0,o._)("p",{class:(0,n.C_)([e.currentNode.nodes.length>0&&e.expanded?e.classIcon[1]:e.classIcon[0]])},"...",2)])])):void 0==e.currentNode.nodes||0===e.currentNode.nodes.length?((0,o.wg)(),(0,o.iD)("div",m,[e.showCheckbox?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("i",k,[(0,o._)("p",{class:(0,n.C_)([e.subIcon[0]])},"...",2)]))])):(0,o.kq)("",!0)]),e.showCheckbox&&""!=e.currentNode.parentUserRoleID?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,n.C_)(["tree-checkbox",{checked:e.currentNode.state.checked,indeterminate:e.currentNode.state.indeterminate}]),onClick:t[1]||(t[1]=(0,d.iM)((t=>e.toggleEvent("checked",e.currentNode)),["stop"]))},null,2)):(0,o.kq)("",!0),(0,o._)("div",{title:e.currentNode.definition,class:(0,n.C_)([{selected:e.selected},e.styles.text.class]),style:(0,n.j5)(e.selected?e.styles.text.active.style:e.styles.text.style)},[e.currentNode.class?((0,o.wg)(),(0,o.iD)("i",C,[(0,o._)("p",{class:(0,n.C_)([e.currentNode.class])},"...",2)])):(0,o.kq)("",!0),(0,o._)("p",null,(0,n.zw)(e.currentNode.text),1),(0,o.wy)((0,o._)("p",{class:"detail",style:{"font-size":"12px"}},(0,n.zw)(e.currentNode?.subtext),513),[[d.F8,e.currentNode?.subtext]])],14,x)],2)):((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("span",{class:(0,n.C_)(["tree_name",[{selected:e.selected},e.styles.text.class]]),title:e.currentNode.definition,style:(0,n.j5)(e.selected?e.styles.text.active.style:e.styles.text.style)},[e.currentNode.class?((0,o.wg)(),(0,o.iD)("i",I,[(0,o._)("p",{class:(0,n.C_)([e.currentNode.class])},"...",2)])):(0,o.kq)("",!0),(0,o._)("span",null,(0,n.zw)(e.currentNode.text),1)],14,v),(0,o._)("span",{onClick:t[2]||(t[2]=(0,d.iM)((t=>void 0!=e.currentNode.nodes&&e.currentNode.nodes.length>0&&e.toggleEvent("expanded",e.currentNode)),["stop"]))},[void 0!=e.currentNode.nodes&&e.currentNode.nodes.length>0?((0,o.wg)(),(0,o.iD)("span",w,[(0,o._)("i",null,[(0,o._)("p",{class:(0,n.C_)([e.expanded?e.classIcon[1]:e.classIcon[0]])},"...",2)])])):void 0==e.currentNode.nodes||0===e.currentNode.nodes.length?((0,o.wg)(),(0,o.iD)("span",D,[e.showCheckbox?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("i",_,[(0,o._)("p",{class:(0,n.C_)([e.subIcon[0]])},"...",2)]))])):(0,o.kq)("",!0)])]))],38),e.expanded&&e.currentNode.nodes&&e.currentNode.nodes.length>0?((0,o.wg)(),(0,o.iD)("ul",{key:0,style:(0,n.j5)(e.styles.rowIndent),class:"sub_tree_list"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.currentNode.nodes,(t=>((0,o.wg)(),(0,o.j4)(s,{ref_for:!0,ref:"TreeRow-"+t.id,"custom-styles":e.customStyles,"hightlight-current":e.hightlightCurrent,"hightlight-current-color":e.hightlightCurrentColor,"show-checkbox":e.showCheckbox,depth:e.depth+1,key:t.id,node:t,"node-path":e.nodePath,"parent-node":e.currentNode,icons:e.icons,classIcon:e.classIcon,subIcon:e.subIcon,"isDisabled-CheckBox":e.isDisabledCheckBox,"position-collapse-icon":e.positionCollapseIcon,onEmitNodeChecked:e.emitNodeChecked,onEmitNodeExpanded:e.emitNodeExpanded,onEmitNodeSelected:e.emitNodeSelected,onEmitDblClick:e.emitDblClick},null,8,["custom-styles","hightlight-current","hightlight-current-color","show-checkbox","depth","node","node-path","parent-node","icons","classIcon","subIcon","isDisabled-CheckBox","position-collapse-icon","onEmitNodeChecked","onEmitNodeExpanded","onEmitNodeSelected","onEmitDblClick"])))),128))],4)):(0,o.kq)("",!0)],12,y)}var E=s(29641);const Z=new E.Z;var A=(0,o.aZ)({props:{customStyles:{type:Object},node:{required:!0,type:Object},nodePath:{required:!0,type:Object},parentNode:{type:Object},depth:{type:Number},hightlightCurrent:{type:Boolean,default:!0},hightlightCurrentColor:{type:String,default:"#ccddfb"},showCheckbox:{type:Boolean,default:!1},icons:{type:Array,default:()=>["fa-angle-right","fa-angle-down"]},classIcon:{type:Array,default:()=>["fa-angle-right","fa-angle-down"]},subIcon:{type:Array,default:()=>["fa-angle-right"]},positionCollapseIcon:{type:String,default:"left"},isDisabledCheckBox:{type:Boolean,default:!1}},data(){const e={row:{style:{width:"100%",cursor:"pointer"},child:{class:"",style:{height:""},active:{class:"",style:{height:""}}}},rowIndent:{paddingLeft:"30px"},iconParent:{class:"icon_parent"},expanded:{class:"expanded_icon"},text:{style:{},class:"",active:{style:{}}}};return{styles:e}},computed:{currentNode:{get(){return this.node},set(e){this.$emit("emitNodeExpanded",e),this.$emit("emitNodeSelected",e),this.$emit("emitNodeChecked",this.nodePath,e)}},expanded(){return this.currentNode.state.expanded},selected(){return this.currentNode.state.selected}},mounted(){this.customStyles&&Z.copyOptions(this.customStyles,this.styles)},methods:{onDblClick(e,t){this.emitDblClick(e,t)},toggleEvent(e,t){if("expanded"===e)this.toggleExpanded(t);else if("selected"===e)this.toggleSelected(t);else if("checked"===e){if(this.isDisabledCheckBox)return;this.toggleChecked(t)}},toggleExpanded(e){this.currentNode.state.expanded=!this.currentNode.state.expanded,this.emitNodeExpanded(e,this.currentNode.state.expanded)},toggleSelected(e){this.currentNode.state.selected=!this.currentNode.state.selected,this.emitNodeSelected(e)},toggleChecked(e){e.state.checked=!e.state.checked,this.emitNodeChecked(e)},emitNodeSelected(e){this.$emit("emitNodeSelected",e)},emitDblClick(e,t){this.$emit("emitDblClick",e,t)},emitNodeExpanded(e,t){this.$emit("emitNodeExpanded",e,t)},emitNodeChecked(e){this.$emit("emitNodeChecked",e)}}}),B=s(83744);const j=(0,B.Z)(A,[["render",S],["__scopeId","data-v-3d9b055e"]]);var T=j;const O=new E.Z;var V=(0,o.aZ)({name:"Tree",components:{TreeRow:T},props:{customStyles:{type:Object},id:{type:String},nodes:{required:!0,type:Array},defaultExpandedKeys:{type:Array,default:()=>[]},hightlightCurrent:{type:Boolean,default:!0},hightlightCurrentColor:{type:String,default:"#ccddfb"},showCheckbox:{type:Boolean,default:!1},expandedAll:{type:Boolean,default:!1},icons:{type:Array,default:()=>["fa-angle-right","fa-angle-down"]},classIcon:{type:Array,default:()=>["fa-angle-right","fa-angle-down"]},subIcon:{type:Array,default:()=>["fa-angle-right"]},filterable:{type:Boolean,default:!0},filterKey:{type:String,default:"text"},filterPlaceholder:{type:String,default:"Search"},positionCollapseIcon:{type:String,default:"left"},isDisabledSearch:{type:Boolean,default:!1},isDisabledCheckBox:{type:Boolean,default:!1}},data(){const e={tree:{style:{}}};return{styles:e,selectedNodeData:{id:""},searchValue:"",treeIndex:null,currentNode:[],treeSearchItem:[],userSelectNode:{}}},mounted(){this.expandedAll?O.expandAllNodes(this.nodes):!this.expandedAll&&this.defaultExpandedKeys&&O.expandNodeAt(this.defaultExpandedKeys,this.nodes),this.customStyles&&O.copyOptions(this.customStyles,this.styles)},watch:{searchValue:{handler(e,t){t&&(this.treeSearchItem=[]),t&&(this.treeIndex=null),this.removeActiveClass()}}},methods:{onDblClick(e,t){this.$emit("on-dblclick",e,t)},removeActiveClass(){this.currentNode=this.flattenTree(this.nodes),this.currentNode.find((e=>{e.state.selected=!1}))},onNodeSelected(e){O.selectNodeAt(this.nodes,e),this.$emit("on-selected",e),this.userSelectNode=e},flattenTree(e){const t=[];return e.forEach((e=>{if(t.push(e),e.nodes.length>0){const s=this.flattenTree(e.nodes);t.push(...s)}})),t},handleSearch(){""!==this.searchValue&&(this.currentNode=this.flattenTree(this.nodes),this.currentNode.filter((e=>{if(e.text.toLowerCase().includes(this.searchValue.toLowerCase().trim())){const t=this.treeSearchItem.find((t=>t.id===e.id));if(t)return;this.treeSearchItem.push(e)}})),this.scrollToItem(),this.removeActiveClassWhenSearchTreeItem())},scrollToItem(){if(this.treeSearchItem.length>0){let t=this.treeSearchItem.length-1;null==this.treeIndex?this.treeIndex=0:this.treeIndex<t?this.treeIndex+=1:this.treeIndex==t&&this.searchValue?this.treeIndex=0:this.treeIndex=null;try{setTimeout((()=>{this.treeSearchItem[this.treeIndex].state.selected=!0}),1),this.treeIndex>0&&(this.treeSearchItem[this.treeIndex-1].state.selected=!1),0==this.treeIndex&&(this.treeSearchItem[t].state.selected=!1);let e=document.querySelector("#tree_active");e&&setTimeout((()=>{const t=e.querySelector(".active");t&&t.scrollIntoView({behavior:"smooth",block:"center"})}),30)}catch(e){return}}},removeActiveClassWhenSearchTreeItem(){this.currentNode=this.flattenTree(this.nodes),this.currentNode.find((e=>{e.id===this.userSelectNode.id&&(e.state.selected=!1)}))},onNodeExpanded(e,t){this.$emit("on-expanded",e.id,t)},recursiveNodeCheck(e){if(e&&e.nodes){const t=e.nodes?.length||0,s=e.nodes?.filter((e=>e.state.checked)).length||0,o=e.nodes?.filter((e=>e.state.indeterminate)).length||0;e.state.checked=t===s,e.state.indeterminate=o>=1||s>=1&&t>s,e.nodes.forEach((e=>{this.recursiveNodeCheck(e)}))}},onNodeChecked(e){this.$emit("on-check-change",e)}}});const K=(0,B.Z)(V,[["render",g],["__scopeId","data-v-9728dcec"]]);var P=K}}]);
//# sourceMappingURL=2187.4c290c12.js.map