"use strict";(self["webpackChunkbizMOB4Vue"]=self["webpackChunkbizMOB4Vue"]||[]).push([[8017],{56513:function(t,e,a){a.a(t,(async function(t,i){try{var n=a(66252),o=a(21638),r=a(42615),s=a(41762),h=a(72224),u=t([h]);h=(u.then?(await u)():u)[0],e["Z"]=(0,n.aZ)({name:"apm202001ss02",components:{pagination:o.Z,VueDatePicker:s.Z},inject:["searchTypeCode"],data(){return{myApprovalLists:[],totalCount:0,startIndex:1,search:{employeeNo:"",pageNumber:1,pageSize:r.IV,searchTypeCode:this.$route.query.filter?"01"!=this.$route.query.filter.toString()?"":"01":"",fromDate:"",toDate:"",authorizationStatusCode:this.$route.query.status?this.$route.query.status.toString():""},isResetPage:!0,headers:["No.","View","Status","Authorization No","Authorization Request reason","Branch/Dept","Requested By","Reason","1st Approver","2nd Approver","3rd Approver","4th Approver","5th Approver","Create Date"]}},watch:{searchTypeCode:{handler(t){this.search.searchTypeCode=t},deep:!0}},computed:{statusTypeCode(){return this.$store.state.CommonCodeModule.commonCode.AuthorizationStatusCode},formattedStartDate(){return this.search.fromDate?this.$datetime.formatVueDatePicker(this.search.fromDate):""},formattedEndDate(){return this.search.toDate?this.$datetime.formatVueDatePicker(this.search.toDate):""}},created(){void 0!==this.$route.query.filter&&void 0!==this.$route.query.tab?this.$route.query.tab&&null!=this.$route.query.filter&&("my-approval"==this.$route.query.tab.toString()?(this.search.searchTypeCode=this.$route.query.filter.toString(),this.requestMyApprovalData(!0,this.search.authorizationStatusCode,this.search.searchTypeCode)):this.requestMyApprovalData(!1,this.search.authorizationStatusCode,this.search.searchTypeCode)):this.requestMyApprovalData(!1,this.search.authorizationStatusCode,this.search.searchTypeCode)},methods:{async requestMyApprovalData(t,e,a){console.log(e),console.log(a);const i={authorizationRequestEmpNo:"",authorizationNo:0,fromDate:"",toDate:"",authorizationBizTypeCode:"",employeeNo:await h.u.getData("employeeNo")||"",searchTypeCode:t?a:"",pageNumber:t?1:this.search.pageNumber,pageSize:this.search.pageSize,authorizationStatusCode:t?e:""},n=await this.$request.getRequest("APM20200111",i,!1);n.header.result&&(this.myApprovalLists=n.body.list,this.totalCount=n.body.totalCount)},handleClearSearch(){this.search.authorizationStatusCode="",this.search.employeeNo="",this.search.pageNumber=1,this.search.pageSize=r.IV,this.search.searchTypeCode="",this.search.fromDate="",this.search.toDate="",this.requestMyApprovalData(!1,this.search.searchTypeCode,this.search.authorizationStatusCode)},handleView(t){t.linkScreenNo.length>13?this.$router.push({path:`/${t.linkScreenNo.slice(0,13)}`,query:{approvalType:"my-approval",approvalStatus:t.authorizationStatusCode,authorizationNo:t.authorizationNo,employeeNo:t.authorizationRequestEmpNo,searchTypeCode:this.search.searchTypeCode,tab:`${t.linkScreenNo.slice(13,26)}`}}):this.$router.push({path:`/${t.linkScreenNo}`,query:{approvalType:"my-approval",approvalStatus:t.authorizationStatusCode,authorizationNo:t.authorizationNo,employeeNo:t.authorizationRequestEmpNo,searchTypeCode:this.search.searchTypeCode}})},handlePagination(t){this.search.pageNumber=t,this.requestMyApprovalData(!1,this.search.searchTypeCode,this.search.authorizationStatusCode)},handleStartIndex(t){this.startIndex=t},handleConvertAuthStatusCode(t){return this.$codeConverter.convertValue("AuthorizationStatusCode",t)}}}),i()}catch(l){i(l)}}))},21638:function(t,e,a){a.d(e,{Z:function(){return m}});var i=a(66252),n=a(3577);const o=t=>((0,i.dD)("data-v-3886d7e2"),t=t(),(0,i.Cn)(),t),r={class:"grid_footer"},s={key:0,class:"grid_option"},h={class:"list_count"},u=o((()=>(0,i._)("dd",null,[(0,i._)("span",null," item(s)")],-1))),l={key:1,class:"paginaton"};function d(t,e){const a=(0,i.up)("ion-button");return(0,i.wg)(),(0,i.iD)("div",r,[t.showTotal?((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",h,[(0,i._)("dl",null,[(0,i._)("dt",null,[(0,i._)("strong",null,(0,n.zw)(t.$util.addComma(t.totalCount,3)),1)]),u])])])):(0,i.kq)("",!0),t.perPage>0&&t.totalCount>0&&t.totalCount>t.perPage?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(a,{class:"btn_page_prev",onClick:t.backwardPagination,disabled:t.isDisabledPrev},{default:(0,i.w5)((()=>[(0,i.Uk)("Prev")])),_:1},8,["onClick","disabled"]),(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.totalPagination,(e=>((0,i.wg)(),(0,i.iD)("li",null,[(0,i.Wm)(a,{class:(0,n.C_)([t.currentPage==e?"on":""]),onClick:a=>t.onClickPagination(e),disabled:"..."===e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e),1)])),_:2},1032,["class","onClick","disabled"])])))),256))]),(0,i.Wm)(a,{class:"btn_page_next",onClick:t.forwardPagination,disabled:t.isDisabledNext},{default:(0,i.w5)((()=>[(0,i.Uk)("Next")])),_:1},8,["onClick","disabled"])])):(0,i.kq)("",!0)])}var g=(0,i.aZ)({name:"pagination",component:{},props:{totalCount:{type:Number,default:0,required:!0},perPage:{type:Number,default:0,required:!0},maxPageShow:{type:Number,default:7},resetPage:{type:Boolean,default:!1,required:!0},showTotal:{type:Boolean,default:!0,required:!1}},emits:["get-page-number","get-starting-index"],data(){return{totalPagination:[],endPagination:0,currentPage:1}},computed:{isDisabledPrev(){return 1==this.currentPage},isDisabledNext(){return this.currentPage==this.endPagination}},watch:{totalCount:{handler(){this.endPagination=this.dividePage(),this.findPagination(this.currentPage),this.currentPage=1,this.$emit("get-starting-index",1)},deep:!0},resetPage(t){t&&(this.currentPage=1,this.$emit("get-starting-index",1),this.findPagination(this.currentPage))}},mounted(){this.endPagination=this.dividePage(),this.findPagination(this.currentPage)},methods:{async findPagination(t){this.currentPage=t;const e=[];if(this.endPagination-this.currentPage>=this.maxPageShow){e.push(this.currentPage.toString());for(let a=0;a<this.maxPageShow-4;a++)e.push((t+a+1).toString());e.push("..."),e.push((this.endPagination-1).toString()),e.push(this.endPagination.toString())}else if(this.endPagination-this.maxPageShow+1<1)for(let a=1;a<=this.endPagination;a++)e.push(a.toString());else for(let a=this.endPagination-this.maxPageShow+1;a<=this.endPagination;a++)e.push(a.toString());return this.totalPagination=e,t},dividePage(){const t=this.totalCount/this.perPage;if(t%1!=0){const e=t.toString().split(".");return(0,n.He)(e[0])+1}return(0,n.He)(t.toFixed())},onClickPagination(t){this.currentPage!=parseInt(t)&&(this.currentPage=parseInt(t),this.findPagination(parseInt(t)),this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1))},async backwardPagination(){let t=10==this.currentPage?9:10,e=this.currentPage-t;e<1?(e=1,await this.findPagination(e).then((t=>{this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))):await this.findPagination(e).then((t=>{this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))},async forwardPagination(){let t=1==this.currentPage?9:10,e=this.currentPage+t;e>Number(this.totalPagination.slice(-1))?(e=Number(this.totalPagination.slice(-1)),await this.findPagination(e).then((t=>{this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))):await this.findPagination(e).then((t=>{this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))},async firstPagination(){await this.findPagination(1).then((t=>{this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))},async lastPagination(){await this.findPagination(this.endPagination).then((t=>{this.$emit("get-page-number",Number(t)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))}}}),p=a(83744);const c=(0,p.Z)(g,[["render",d],["__scopeId","data-v-3886d7e2"]]);var m=c},58017:function(t,e,a){a.a(t,(async function(t,i){try{a.r(e);var n=a(26865),o=a(19582),r=(a(11563),a(83744)),s=t([o]);o=(s.then?(await s)():s)[0];const h=(0,r.Z)(o.Z,[["render",n.s],["__scopeId","data-v-82d36fca"]]);e["default"]=h,i()}catch(h){i(h)}}))},11563:function(){},19582:function(t,e,a){a.a(t,(async function(t,i){try{a.d(e,{Z:function(){return n.Z}});var n=a(56513),o=t([n]);n=(o.then?(await o)():o)[0],i()}catch(r){i(r)}}))},26865:function(t,e,a){a.d(e,{s:function(){return m}});var i=a(66252),n=a(3577);const o=t=>((0,i.dD)("data-v-82d36fca"),t=t(),(0,i.Cn)(),t),r={class:"cont_tab"},s={class:"gridwrap no_grid_option"},h={class:"tableWrap"},u={class:"table01 fixed"},l=o((()=>(0,i._)("colgroup",null,[(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col"),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col"),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}})],-1))),d={class:"sticky_head"},g={class:"tbody_section"},p=o((()=>(0,i._)("p",null,"No Data",-1))),c=[p];function m(t,e){const a=(0,i.up)("ion-button"),o=(0,i.up)("pagination");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",s,[(0,i._)("div",h,[(0,i._)("table",u,[l,(0,i._)("thead",d,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.headers,(t=>((0,i.wg)(),(0,i.iD)("th",null,[(0,i._)("span",null,(0,n.zw)(t),1)])))),256))])]),(0,i._)("tbody",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.myApprovalLists,((e,o)=>((0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(t.startIndex+o),1)]),(0,i._)("td",null,[(0,i.Wm)(a,{class:"btn_view",onClick:a=>t.handleView(e)},{default:(0,i.w5)((()=>[(0,i.Uk)("View")])),_:2},1032,["onClick"])]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(t.$codeConverter.convertValue("AuthorizationStatusCode",e.authorizationStatusCode)),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorizationNo),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.requestorReason),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(`${e.authorizationRequestBranchName}(${e.authorizationRequestEmpNo})`),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorizationRequestEmpName),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorizerReason),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorization1EmpName?`${e.authorization1EmpName} ${t.$datetime.formatStringToStringDate(e.authorization1Date)} ${t.$datetime.formatStringToTime(e.authorization1Time)}`:""),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorization2EmpName?`${e.authorization2EmpName} ${t.$datetime.formatStringToStringDate(e.authorization2Date)} ${t.$datetime.formatStringToTime(e.authorization2Time)}`:""),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorization3EmpName?`${e.authorization3EmpName} ${t.$datetime.formatStringToStringDate(e.authorization3Date)} ${t.$datetime.formatStringToTime(e.authorization3Time)}`:""),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorization4EmpName?`${e.authorization4EmpName} ${t.$datetime.formatStringToStringDate(e.authorization4Date)} ${t.$datetime.formatStringToTime(e.authorization4Time)}`:""),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(e.authorization5EmpName?`${e.authorization5EmpName} ${t.$datetime.formatStringToStringDate(e.authorization5Date)} ${t.$datetime.formatStringToTime(e.authorization5Time)}`:""),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,n.zw)(`${t.$datetime.formatStringToStringDate(e.firstRegisterDate)} ${t.$datetime.formatStringToTime(e.firstRegisterTime)}`),1)])])))),256))])]),(0,i._)("div",{class:(0,n.C_)([0!==t.myApprovalLists.length?"none":"","no_data"])},c,2)]),(0,i.Wm)(o,{totalCount:t.totalCount,perPage:t.search.pageSize,resetPage:t.isResetPage,onGetPageNumber:t.handlePagination,onGetStartingIndex:t.handleStartIndex},null,8,["totalCount","perPage","resetPage","onGetPageNumber","onGetStartingIndex"])])])}}}]);
//# sourceMappingURL=8017.ae1fd1aa.js.map