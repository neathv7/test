"use strict";(self["webpackChunkbizMOB4Vue"]=self["webpackChunkbizMOB4Vue"]||[]).push([[233],{28183:function(e,t,a){a.a(e,(async function(e,i){try{var r=a(66252),n=a(75080),o=a(72224),s=e([o]);o=(s.then?(await s)():s)[0],t["Z"]=(0,r.aZ)({props:{staticScreenName:{type:String,required:!1},queryData:{type:Array,required:!1}},data(){return{breadcrumbs:[],menuList:[]}},async created(){setTimeout((()=>{this.renderMenuFromState(),this.getMenuList()}),100)},computed:{approvalType(){return this.$route.query.approvalType?this.$route.query.approvalType.toString():""}},watch:{staticScreenName(e){"/COM210001SC00"==this.$route.path&&(e&&(2==this.breadcrumbs.length?this.breadcrumbs:this.breadcrumbs.pop()),this.breadcrumbs.push({menuName:e,route:""}))}},methods:{pathDriver(e,t){if(""===this.approvalType){if(this.$route.path==e)return;t?this.$router.push({path:e,query:t}):this.$router.push(e)}},async renderMenuFromState(){return n.Z.getters.getMenuData},async getMenuList(){try{this.menuList=await this.renderMenuFromState(),this.menuList.length>0?(this.menuList=JSON.parse(JSON.stringify(this.menuList)).filter((e=>""!=e.parentMenuID.replace(/\s/g,""))),this.buildBreadcrumb(this.menuList,this.$route.path)):console.log("menu not yet rendered")}catch(e){console.log("Error rendering menu:",e)}},async buildBreadcrumb(e,t){const a=e.find((e=>`/${e.screenID}`==t));if(a){if(this.generateBreadcrumbs(e,a),"/ICM201001SC00"==this.$route.path){const t=e.find((e=>"ICM201001SC00"==e.screenID));o.u.setData("SpecialScreenID",JSON.stringify(t))}}else{if("/CIB202003SC00"==this.$route.path){let t,a;a=e.find((e=>"CIB202002SC00"==e.screenID)),t={menuName:this.staticScreenName?this.staticScreenName:"",screenID:this.$route.path.replace("/",""),parentMenuID:a.menuID,menuID:"1"},this.generateBreadcrumbs(e,t)}const t=this.$route.path.replace("/","");let a=[];this.menuList.forEach((e=>{a.push(e.screenID)})),a.forEach((a=>{let i;if(this.matchScreenID(a,t)&&(i=e.find((e=>`${e.screenID}`==a)),i&&this.generateBreadcrumbs(e,i)),""!==this.approvalType&&("VBA202002SC00"==t||"CIB201003SC00"==t)&&this.matchApprovalModeScreenID(a,t)){const t=e.find((e=>`${e.screenID}`==a));this.generateBreadcrumbs(e,t)}}));let i=t.charAt(t.length-1);if("1"===i){let e={menuName:this.staticScreenName?this.staticScreenName:"",route:`/${t}`};this.breadcrumbs.push(e),o.u.setData("TempBreadCrumb",JSON.stringify(e))}else if("2"===i)if("/COM211001SC02"==this.$route.path)this.breadcrumbs.push({menuName:this.staticScreenName?this.staticScreenName:"",route:`/${t}`});else{let e=JSON.parse(await o.u.getData("TempBreadCrumb"));this.breadcrumbs.push(e,{menuName:this.staticScreenName?this.staticScreenName:"",route:`/${t}`})}else if("/CIB202003SC00"!=this.$route.path&&"/PUM202002SC00"!=this.$route.path){let a=this.$router.options.history.state.back,i=a.includes("/")?a.replace("/",""):a;const r=await e.find((e=>`${e.screenID}`==i));this.breadcrumbs.push({menuName:this.staticScreenName?this.staticScreenName:"",route:`/${t}`}),this.generateBreadcrumbs(e,r)}if("/ICM201002SC01"==this.$route.path){this.breadcrumbs=[];let a=JSON.parse(await o.u.getData("SpecialScreenID"));this.breadcrumbs.push({menuName:this.staticScreenName?this.staticScreenName:"",route:`/${t}`}),this.generateBreadcrumbs(e,a)}else if("/CIB202003SC01"==this.$route.path){let a,i;this.breadcrumbs=[],i=e.find((e=>"CIB202002SC00"==e.screenID)),a={menuName:this.$t("cib202003sc00.sub_user_list"),screenID:"CIB202003SC00",parentMenuID:i.menuID},this.breadcrumbs.push({menuName:this.staticScreenName?this.staticScreenName:"",route:`/${t}`}),this.generateBreadcrumbs(e,a)}else if("/PUM202002SC00"==this.$route.path){let t,a;a=e.find((e=>"COM200001SC00"==e.screenID)),t={menuName:this.staticScreenName?this.staticScreenName:"",screenID:this.$route.path.replace("/",""),parentMenuID:a.menuID},this.generateBreadcrumbs(e,t)}}},async generateBreadcrumbs(e,t){try{if(t){const a={menuName:t.menuName,route:`/${t.screenID}`,menuIconID:t.menuIconID};if(this.breadcrumbs.unshift(a),t.parentMenuID){const a=e.find((e=>e.menuID==t.parentMenuID));a&&this.generateBreadcrumbs(e,a)}}}catch(a){console.log(a)}},matchScreenID(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length-1;a++)if(e[a]!==t[a])return!1;return!0},matchApprovalModeScreenID(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length-5;a++)if(e[a]!==t[a])return!1;return!0}}}),i()}catch(u){i(u)}}))},36628:function(e,t,a){a.a(e,(async function(e,i){try{var r=a(66252),n=a(43493),o=a(90121),s=e([o]);o=(s.then?(await s)():s)[0],t["Z"]=(0,r.aZ)({name:"apm202002sc00",components:{BreadCrumb:o.Z},data(){return{companyAuthorizationLineSettingInfo:{},authorizationCodeList:[],operationMode:"normal",approvalRes:{},authorizationBizTypeCodeItem:[]}},async created(){""===this.approvalType?this.requestData():await this.$approval.getAuthorizationDetail().then((async e=>{let t=JSON.parse(e.body.requestContent);this.approvalRes=e.body,this.operationMode="my-request"==this.approvalType?"read":"my-approval"==this.approvalType?"approval":"normal";const a={customerNo:t.customerNo?.toString(),masterUserID:t.masterUserID?.toString()},i=await this.$request.getRequest("APM20400112",a,!1);i.header.result&&(this.companyAuthorizationLineSettingInfo=i.body,this.authorizationCodeList=JSON.parse(JSON.stringify(i.body.authorizationCodeList)).map((e=>(e.authorizationLineStepList=[...e.authorizationLineStepList],e)))),this.authorizationBizTypeCodeItem.push({authorizationBizTypeCode1:t.authorizationBizTypeCode1,authorizationBizTypeCode2:t.authorizationBizTypeCode2})}))},computed:{approvalType(){return this.$route.query.approvalType?this.$route.query.approvalType.toString():""}},methods:{async requestData(){const e={customerNo:this.$route.query.customerNo?.toString(),masterUserID:this.$route.query.masterUserID?.toString()},t=await this.$request.getRequest("APM20400112",e,!1);t.header.result&&(this.companyAuthorizationLineSettingInfo=t.body,this.authorizationCodeList=JSON.parse(JSON.stringify(t.body.authorizationCodeList)).map((e=>(e.authorizationLineStepList=[...e.authorizationLineStepList],e))))},async requestDelete(e){let t;e.authorizationLineStepList.find((e=>{e.approverID!=this.$route.query.masterUserID&&"FINAL"!=e.authorizationRoleCode||(t=e.authorizationRoleCode)}));const a={authorizationBizTypeCode1:e.authorizationBizTypeCode1,authorizationAuthorityTypeCode:e.authorizationAuthorityTypeCode,authorizationBizTypeCode2:e.authorizationBizTypeCode2,masterUserID:this.$route.query.masterUserID,customerNo:this.$route.query.customerNo,authorizationRoleCode:t};await this.$request.getRequest("APM20400132",a,!1).then((e=>{if(e.header.result)return this.$dialog.onOpen({dialogMode:"Success",content:this.$t("message.reset_approvol_line_success"),callback:()=>{n.Fy.dismiss()}}),this.requestData()}))},handleClickAction(e,t){switch(e){case"list":this.$router.push("/APM204001SC00");break;case"edit":this.$router.push({path:"APM204001SC02",query:{authorizationAuthorityTypeCode:t.authorizationAuthorityTypeCode,customerNo:this.companyAuthorizationLineSettingInfo.customerNo,authorizationBizTypeCode2:t.authorizationBizTypeCode2,masterUserID:this.companyAuthorizationLineSettingInfo.masterUserID,authorizationBizTypeCode1:t.authorizationBizTypeCode1}});break;case"delete":this.$dialog.onOpen({dialogMode:"Question",content:this.$t("message.reset_approvol_line"),callback:async()=>{n.Fy.dismiss(),this.requestDelete(t)}});break}},activeAuthorizedLineActive(e){return this.authorizationBizTypeCodeItem.find((t=>e.authorizationBizTypeCode1==t.authorizationBizTypeCode1&&e.authorizationBizTypeCode2==t.authorizationBizTypeCode2))},disableResetAuthorizedMode(e){let t=!1;if(0===e.authorizationLineStepList.length)t=!0;else{if(1!==e.authorizationLineStepList.length)return;e.authorizationLineStepList.find((e=>{"FINAL"===e.authorizationRoleCode&&(t=!0)}))}return t}}}),i()}catch(u){i(u)}}))},90121:function(e,t,a){a.a(e,(async function(e,i){try{var r=a(55864),n=a(44104),o=(a(55241),a(83744)),s=e([n]);n=(s.then?(await s)():s)[0];const u=(0,o.Z)(n.Z,[["render",r.s],["__scopeId","data-v-6668b2f2"]]);t["Z"]=u,i()}catch(u){i(u)}}))},20233:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t);var r=a(19408),n=a(7980),o=(a(9952),a(83744)),s=e([n]);n=(s.then?(await s)():s)[0];const u=(0,o.Z)(n.Z,[["render",r.s],["__scopeId","data-v-aff4bb80"]]);t["default"]=u,i()}catch(u){i(u)}}))},55241:function(){},9952:function(){},44104:function(e,t,a){a.a(e,(async function(e,i){try{a.d(t,{Z:function(){return r.Z}});var r=a(28183),n=e([r]);r=(n.then?(await n)():n)[0],i()}catch(o){i(o)}}))},7980:function(e,t,a){a.a(e,(async function(e,i){try{a.d(t,{Z:function(){return r.Z}});var r=a(36628),n=e([r]);r=(n.then?(await n)():n)[0],i()}catch(o){i(o)}}))},55864:function(e,t,a){a.d(t,{s:function(){return o}});var i=a(66252),r=a(3577);const n={class:"bread_crumb"};function o(e,t){const a=(0,i.up)("ion-label");return(0,i.wg)(),(0,i.iD)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.breadcrumbs,((t,n)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:n},[t.menuIconID&&0==n?((0,i.wg)(),(0,i.iD)("span",{key:0,class:(0,r.C_)(["icon_menu",[t.menuIconID]])},null,2)):(0,i.kq)("",!0),""==t.route||"/"==t.route?((0,i.wg)(),(0,i.j4)(a,{key:1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.$t(`${t.menuName}`)),1)])),_:2},1024)):(0,i.kq)("",!0),""!=t.route&&"/"!=t.route?((0,i.wg)(),(0,i.j4)(a,{key:2,onClick:a=>e.pathDriver(t.route,e.queryData)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.$t(`${t.menuName}`)),1)])),_:2},1032,["onClick"])):(0,i.kq)("",!0)],64)))),128))])}},19408:function(e,t,a){a.d(t,{s:function(){return b}});var i=a(66252),r=a(3577);const n={class:"contentWrap"},o={class:"optwrap"},s={class:"title_name"},u={class:"approval_info02"},c={class:"cont"},h={class:"row list_auth_card"},p={class:"approval_title"},l={class:"approval_line_cont"},m={class:"approval_info"},d={key:0},y={class:"approver_name"},z={key:1},f={class:"amount"},C={key:0,class:"approval_option"},S={key:0,class:"footer_btn"},g={class:"left_side"};function b(e,t){const a=(0,i.up)("BreadCrumb"),b=(0,i.up)("ion-item"),I=(0,i.up)("ion-list"),D=(0,i.up)("ion-button"),_=(0,i.up)("ApprovalReason");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",o,[(0,i.Wm)(a,{items:e.breadcrumbs,staticScreenName:e.$t("apm204001sc01.company_authorization_line_setting")},null,8,["items","staticScreenName"])]),(0,i._)("h1",s,(0,r.zw)(e.$t("apm204001sc01.company_authorization_line_setting")),1),(0,i._)("div",u,[(0,i._)("dl",null,[(0,i._)("dt",null,(0,r.zw)(e.$t("apm204001sc01.company_name")),1),(0,i._)("dd",null,(0,r.zw)(e.companyAuthorizationLineSettingInfo.companyName?e.companyAuthorizationLineSettingInfo.companyName:""),1)]),(0,i._)("dl",null,[(0,i._)("dt",null,(0,r.zw)(e.$t("apm204001sc01.master_user")),1),(0,i._)("dd",null,(0,r.zw)(e.companyAuthorizationLineSettingInfo.masterUserID?`${e.companyAuthorizationLineSettingInfo.customerName}(${e.companyAuthorizationLineSettingInfo.masterUserID})`:""),1)]),(0,i._)("dl",null,[(0,i._)("dd",null,(0,r.zw)(e.$t("apm204001sc01.authorization_line")),1)])]),(0,i._)("div",c,[(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.authorizationCodeList,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["col-4",{activeCard:""!==this.requestData&&e.activeAuthorizedLineActive(t)}]),key:a},[(0,i._)("div",p,(0,r.zw)(t.authorizationCodeName),1),(0,i._)("div",l,[(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.authorizationLineStepList,((t,a)=>((0,i.wg)(),(0,i.j4)(b,{key:a},{default:(0,i.w5)((()=>[(0,i._)("div",m,[(0,i._)("h4",null,[(0,i._)("span",null,(0,r.zw)(`${t.seqNo}.`),1),(0,i._)("span",null,(0,r.zw)(t.userRoleName),1)]),t.approverID?((0,i.wg)(),(0,i.iD)("p",d,[(0,i._)("span",null,(0,r.zw)(e.$t("apm204001sc01.in_charge")),1),(0,i._)("span",y,(0,r.zw)(t.userName?t.userName:t.customerName),1)])):(0,i.kq)("",!0),t.approverID!==e.companyAuthorizationLineSettingInfo.masterUserID&&"FINAL"!=t.authorizationRoleCode&&"CHECK"!=t.authorizationRoleCode&&"STP"!=t.authorizationRoleCode?((0,i.wg)(),(0,i.iD)("p",z,[(0,i._)("span",null,(0,r.zw)(e.$t("apm204001sc01.up_to")),1),(0,i._)("strong",f,[(0,i._)("span",null,(0,r.zw)(`~${t.maxAmount}${t.currencyCode}`),1)])])):(0,i.kq)("",!0)])])),_:2},1024)))),128))])),_:2},1024)]),"normal"==e.operationMode?((0,i.wg)(),(0,i.iD)("div",C,[(0,i.Wm)(D,{class:"btn04",disabled:e.disableResetAuthorizedMode(t),onClick:a=>e.handleClickAction("delete",t)},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,r.zw)(e.$t("common.reset")),1)])),_:2},1032,["disabled","onClick"]),(0,i.Wm)(D,{class:"btn02",onClick:a=>e.handleClickAction("edit",t)},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,r.zw)(e.$t("common.edit")),1)])),_:2},1032,["onClick"])])):(0,i.kq)("",!0)],2)))),128))])]),"normal"==e.operationMode?((0,i.wg)(),(0,i.iD)("div",S,[(0,i._)("div",g,[(0,i.Wm)(D,{class:"btn02",onClick:t[0]||(t[0]=t=>e.handleClickAction("list"))},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,r.zw)(e.$t("common.list")),1)])),_:1})])])):(0,i.kq)("",!0),"normal"!==e.operationMode?((0,i.wg)(),(0,i.j4)(_,{key:1,payload:e.approvalRes},null,8,["payload"])):(0,i.kq)("",!0)])}}}]);
//# sourceMappingURL=233.55c75fa9.js.map