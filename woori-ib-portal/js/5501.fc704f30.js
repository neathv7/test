"use strict";(self["webpackChunkbizMOB4Vue"]=self["webpackChunkbizMOB4Vue"]||[]).push([[5501],{21620:function(e,t,a){a.a(e,(async function(e,i){try{var s=a(66252),n=a(93514),o=a(43493),r=a(42615),l=a(21638),d=a(90121),c=e([d]);d=(c.then?(await c)():c)[0],t["Z"]=(0,s.aZ)({name:"cib203001sc00",components:{CustomerInformation:n.Z,Pagination:l.Z,BreadCrumb:d.Z},data(){const e={customerNo:"",nationalID:"",passportNumber:"",businessNo:"",customerFullName:""},t=[{columnName:"IB User ID"},{columnName:"Customer Type"},{columnName:"Status"},{columnName:"Open Date"},{columnName:"Close Date"}];return{headers:t,dataTable:[],searchFields:e,checkedList:[],checked:!1,isAllChecked:!1,customerInfo:{},isInValidInput:!1,totalItems:0,currentPage:1,pageSize:r.IV,startingIndex:1,resetPage:!1,approvalRes:{},operationMode:"normal"}},async created(){""===this.approvalType?this.searchFields.customerNo&&await this.handleSearch():await this.$approval.getAuthorizationDetail().then((async e=>{let t=JSON.parse(e.body.requestContent);this.approvalRes=e.body,this.operationMode="my-request"==this.approvalType?"read":"my-approval"==this.approvalType?"approval":"normal",t.list.find((e=>{this.searchFields.customerNo=e.customerNo}));const a={customerNo:this.searchFields.customerNo},i=await this.$request.getRequest("CIB20100114",a,!1);i.header.result&&(this.customerInfo=i.body,this.dataTable=t.list)}))},computed:{approvalType(){return this.$route.query.approvalType?this.$route.query.approvalType.toString():""}},methods:{async getCustomerInformation(){const e={customerNo:this.searchFields.customerNo},t=await this.$request.getRequest("CIB20100114",e,!1);t.header.result?this.customerInfo={customerNo:t.body.customerNo,customerType:t.body.customerType,localCustomerName:t.body.localCustomerName,customerShortName:t.body.customerShortName,countryCode:t.body.countryCode,nationality:t.body.nationality,branchCode:t.body.branchCode,branchName:t.body.branchName,customerFullName:t.body.customerFullName,location:t.body.location,mailersRequiredYN:t.body.mailersRequiredYN,customerStatusCode:t.body.customerStatusCode,customerFirstName:t.body.customerFirstName,customerLastName:t.body.customerLastName,dateOfBirth:t.body.dateOfBirth,genderCode:t.body.genderCode,nationalID:t.body.nationalID,passportNumber:t.body.passportNumber,iDExpiryDate:t.body.iDExpiryDate,consumerPhone:t.body.consumerPhone,email:t.body.email,customerAddress:t.body.customerAddress}:this.customerInfo={customerNo:"",customerType:"",localCustomerName:"",customerShortName:"",countryCode:"",nationality:"",branchCode:"",branchName:"",consumerPhone:"",customerFullName:"",customerAddress:"",location:"",mailersRequiredYN:"",customerStatusCode:"",customerFirstName:"",customerLastName:"",dateOfBirth:"",genderCode:"",nationalID:"",passportNumber:"",iDExpiryDate:"",email:""}},async handleSearch(e){if(!this.searchFields.customerNo)return this.isInValidInput=!0;const t={customerNo:this.searchFields.customerNo,pageSize:this.pageSize,pageNumber:"search"==e?0:this.currentPage},a=await this.$request.getRequest("CIB20100111",t,!1);"search"===e&&(this.currentPage=1,this.resetPage=!0),a.header.result&&(this.dataTable=JSON.parse(JSON.stringify(this.convertCodeToValue(a.body.list))),this.totalItems=a.body.totalCount),this.getCustomerInformation()},convertCodeToValue(e){return e.map((e=>({accountManagementTypeCode:e.accountManagementTypeCode,allowAccountOpenCloseYN:e.allowAccountOpenCloseYN,applicationDate:this.$datetime.formatStringToStringDate(e.applicationDate),authorizationLineAssignTypeCode:e.authorizationLineAssignTypeCode,authorizationLinePolicyTypeCode:e.authorizationLinePolicyTypeCode,cellPhoneNo:e.cellPhoneNo,cellPhoneNo2:e.cellPhoneNo2,companyName:e.companyName,customerCorpIndTypeCode:this.$codeConverter.convertValue("CustomerCorpIndTypeCode",e.customerCorpIndTypeCode),customerName:e.customerName,customerNo:e.customerNo,email:e.email,feeExemptYN:e.feeExemptYN,feeServiceStatusCode:e.feeServiceStatusCode,feeWithdrawalAccountNo:e.feeWithdrawalAccountNo,languageCode:e.languageCode,mainTransferAccount:e.mainTransferAccount,mainUserRoleID:e.mainUserRoleID,managerBankID:e.managerBankID,mobileISDCode:e.mobileISDCode,mobileISDCode2:e.mobileISDCode2,securityMediaNo:e.securityMediaNo,securityMediaTypeCode:this.$codeConverter.convertValue("SecurityMediaTypeCode",e.securityMediaTypeCode),serviceStatusCode:e.serviceStatusCode,subscriptionApprovalTypeCode:e.subscriptionApprovalTypeCode,terminationDate:this.$datetime.formatStringToStringDate(e.terminationDate),userID:e.userID,userName:e.userName})))},resetForm(){this.searchFields.customerNo="",this.searchFields.nationalID="",this.searchFields.passportNumber="",this.searchFields.businessNo="",this.searchFields.customerFullName="",this.isInValidInput=!1,this.currentPage=1,this.resetPage=!0,this.totalItems=0,this.customerInfo={},this.dataTable=[]},handleChecked(e){if(e.checked)this.checkedList.push({customerNo:e.customerNo,userID:e.userID,serviceStatusCode:e.serviceStatusCode});else{const t=this.checkedList.findIndex((t=>t.userID==e.userID));-1!==t&&this.checkedList.splice(t,1)}this.isAllChecked=this.checkedList.length===this.dataTable.length},handleAllChecked(){this.isAllChecked?this.dataTable.forEach((e=>e.checked=!0)):this.dataTable.length===this.checkedList.length&&this.dataTable.forEach((e=>e.checked=!1))},handlePagination(e){this.currentPage=e,this.resetPage=!1,this.handleSearch()},handleStartingIndex(e){this.startingIndex=e},async unsubscribed(){const e={list:this.checkedList},t=await this.$request.getRequest("CIB20300131",e,!1);return t.header.result&&this.$dialog.onOpen({content:this.$t("cib203001sc00.unsubscribe_successfully"),dialogMode:"Success",callback:()=>{this.handleSearch(),o.Fy.dismiss()}}),t.header.result},handleUnsubscribe(){const e="02";if(!this.checkedList.length)return this.$dialog.onOpen({content:this.$t("cib203001sc00.please_select_one_to_suspend"),dialogMode:"Warning",callback:()=>{o.Fy.dismiss()}});let t="";return this.checkedList.forEach((a=>{if(a.serviceStatusCode===e)return t=a.userID})),t?this.$dialog.onOpen({content:`${this.$t("cib203001sc00.this_ib_user")} ${t} ${this.$t("cib203001sc00.is_already_terminated")}`,dialogMode:"Warning",callback:()=>{o.Fy.dismiss()}}):(this.checkedList.forEach((a=>{if(a.serviceStatusCode!==e)return t=a.userID})),this.$dialog.onOpen({content:`${this.$t("cib203001sc00.do_you_want_to_unsubscribe_this_ib_user")} ${t}?`,dialogMode:"Question",callback:()=>{this.unsubscribed().then((e=>{e&&(this.handleSearch(),o.Fy.dismiss())})),o.Fy.dismiss()}}))}}}),i()}catch(u){i(u)}}))},21638:function(e,t,a){a.d(t,{Z:function(){return g}});var i=a(66252),s=a(3577);const n=e=>((0,i.dD)("data-v-3886d7e2"),e=e(),(0,i.Cn)(),e),o={class:"grid_footer"},r={key:0,class:"grid_option"},l={class:"list_count"},d=n((()=>(0,i._)("dd",null,[(0,i._)("span",null," item(s)")],-1))),c={key:1,class:"paginaton"};function u(e,t){const a=(0,i.up)("ion-button");return(0,i.wg)(),(0,i.iD)("div",o,[e.showTotal?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",l,[(0,i._)("dl",null,[(0,i._)("dt",null,[(0,i._)("strong",null,(0,s.zw)(e.$util.addComma(e.totalCount,3)),1)]),d])])])):(0,i.kq)("",!0),e.perPage>0&&e.totalCount>0&&e.totalCount>e.perPage?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(a,{class:"btn_page_prev",onClick:e.backwardPagination,disabled:e.isDisabledPrev},{default:(0,i.w5)((()=>[(0,i.Uk)("Prev")])),_:1},8,["onClick","disabled"]),(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.totalPagination,(t=>((0,i.wg)(),(0,i.iD)("li",null,[(0,i.Wm)(a,{class:(0,s.C_)([e.currentPage==t?"on":""]),onClick:a=>e.onClickPagination(t),disabled:"..."===t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t),1)])),_:2},1032,["class","onClick","disabled"])])))),256))]),(0,i.Wm)(a,{class:"btn_page_next",onClick:e.forwardPagination,disabled:e.isDisabledNext},{default:(0,i.w5)((()=>[(0,i.Uk)("Next")])),_:1},8,["onClick","disabled"])])):(0,i.kq)("",!0)])}var h=(0,i.aZ)({name:"pagination",component:{},props:{totalCount:{type:Number,default:0,required:!0},perPage:{type:Number,default:0,required:!0},maxPageShow:{type:Number,default:7},resetPage:{type:Boolean,default:!1,required:!0},showTotal:{type:Boolean,default:!0,required:!1}},emits:["get-page-number","get-starting-index"],data(){return{totalPagination:[],endPagination:0,currentPage:1}},computed:{isDisabledPrev(){return 1==this.currentPage},isDisabledNext(){return this.currentPage==this.endPagination}},watch:{totalCount:{handler(){this.endPagination=this.dividePage(),this.findPagination(this.currentPage),this.currentPage=1,this.$emit("get-starting-index",1)},deep:!0},resetPage(e){e&&(this.currentPage=1,this.$emit("get-starting-index",1),this.findPagination(this.currentPage))}},mounted(){this.endPagination=this.dividePage(),this.findPagination(this.currentPage)},methods:{async findPagination(e){this.currentPage=e;const t=[];if(this.endPagination-this.currentPage>=this.maxPageShow){t.push(this.currentPage.toString());for(let a=0;a<this.maxPageShow-4;a++)t.push((e+a+1).toString());t.push("..."),t.push((this.endPagination-1).toString()),t.push(this.endPagination.toString())}else if(this.endPagination-this.maxPageShow+1<1)for(let a=1;a<=this.endPagination;a++)t.push(a.toString());else for(let a=this.endPagination-this.maxPageShow+1;a<=this.endPagination;a++)t.push(a.toString());return this.totalPagination=t,e},dividePage(){const e=this.totalCount/this.perPage;if(e%1!=0){const t=e.toString().split(".");return(0,s.He)(t[0])+1}return(0,s.He)(e.toFixed())},onClickPagination(e){this.currentPage!=parseInt(e)&&(this.currentPage=parseInt(e),this.findPagination(parseInt(e)),this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1))},async backwardPagination(){let e=10==this.currentPage?9:10,t=this.currentPage-e;t<1?(t=1,await this.findPagination(t).then((e=>{this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))):await this.findPagination(t).then((e=>{this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))},async forwardPagination(){let e=1==this.currentPage?9:10,t=this.currentPage+e;t>Number(this.totalPagination.slice(-1))?(t=Number(this.totalPagination.slice(-1)),await this.findPagination(t).then((e=>{this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))):await this.findPagination(t).then((e=>{this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))},async firstPagination(){await this.findPagination(1).then((e=>{this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))},async lastPagination(){await this.findPagination(this.endPagination).then((e=>{this.$emit("get-page-number",Number(e)),this.$emit("get-starting-index",this.currentPage*this.perPage-this.perPage+1)}))}}}),m=a(83744);const p=(0,m.Z)(h,[["render",u],["__scopeId","data-v-3886d7e2"]]);var g=p},45501:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t);var s=a(89552),n=a(52264),o=(a(46605),a(83744)),r=e([n]);n=(r.then?(await r)():r)[0];const l=(0,o.Z)(n.Z,[["render",s.s],["__scopeId","data-v-59bd3c31"]]);t["default"]=l,i()}catch(l){i(l)}}))},46605:function(){},52264:function(e,t,a){a.a(e,(async function(e,i){try{a.d(t,{Z:function(){return s.Z}});var s=a(21620),n=e([s]);s=(n.then?(await n)():n)[0],i()}catch(o){i(o)}}))},89552:function(e,t,a){a.d(t,{s:function(){return W}});var i=a(66252),s=a(3577),n=a(49963);const o=e=>((0,i.dD)("data-v-59bd3c31"),e=e(),(0,i.Cn)(),e),r={class:"contentWrap"},l={class:"title_name"},d={class:"cont"},c={class:"row gap"},u={class:"col"},h={class:"form01"},m=o((()=>(0,i._)("span",{class:"require"},"*",-1))),p={class:"inp"},g={key:0,class:"txt_error"},b={class:"col"},_={class:"form01"},y={class:"inp_box"},P={class:"inp"},C={class:"col"},N={class:"form01"},f={class:"inp_box"},w={class:"inp"},v={class:"footer_btn"},I={class:"right_side"},k={class:"gridwrap no_grid_option"},S={class:"tableWrap"},D={class:"table01 fixed"},$=o((()=>(0,i._)("colgroup",null,[(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"80px"}}),(0,i._)("col",{style:{width:"120px"}}),(0,i._)("col",{style:{width:"220px"}}),(0,i._)("col",{style:{width:"120px"}}),(0,i._)("col",{style:{width:"220px"}}),(0,i._)("col",{style:{width:"220px"}})],-1))),x={class:"sticky_head"},T={class:"tbody_section"},F=["id","onClick"],M=o((()=>(0,i._)("p",null,"No Data",-1))),V=[M],z={key:0,class:"footer_btn"},q={class:"right_side"},A=o((()=>(0,i._)("span",{class:"unsubcribe"},"Unsubscribe",-1)));function W(e,t){const a=(0,i.up)("BreadCrumb"),o=(0,i.up)("ion-input"),M=(0,i.up)("ion-button"),W=(0,i.up)("CustomerInformation"),L=(0,i.up)("ion-checkbox"),B=(0,i.up)("Pagination"),U=(0,i.up)("ApprovalReason");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(a,{items:e.breadcrumbs},null,8,["items"]),(0,i._)("h1",l,(0,s.zw)(e.$t("cib203001sc00.ib_unsubsription")),1),(0,i._)("div",d,[(0,i._)("div",c,[(0,i._)("div",u,[(0,i._)("dl",h,[(0,i._)("dt",null,[(0,i.Uk)((0,s.zw)(e.$t("cib201001sc00.customer_no")),1),m]),(0,i._)("dd",null,[(0,i._)("div",{class:(0,s.C_)(["inp_box",{inp_error:e.isInValidInput&&""===e.searchFields.customerNo}])},[(0,i._)("div",p,[(0,i.Wm)(o,{modelValue:e.searchFields.customerNo,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchFields.customerNo=t),onKeyup:t[1]||(t[1]=(0,n.D2)((t=>e.handleSearch()),["enter"])),class:(0,s.C_)([e.isInValidInput&&""===e.searchFields.customerNo?"line":""]),placeholder:e.$t("cib201001sc00.placeholder.customer_no"),disabled:e.isShowed||"read"==e.operationMode||"approval"==e.operationMode},null,8,["modelValue","class","placeholder","disabled"])]),e.isInValidInput&&""===e.searchFields.customerNo?((0,i.wg)(),(0,i.iD)("p",g,(0,s.zw)(e.$t("This Customer No is required.")),1)):(0,i.kq)("",!0)],2)])])]),(0,i._)("div",b,[(0,i._)("dl",_,[(0,i._)("dt",null,(0,s.zw)(e.$t("cib201001sc00.customer_name")),1),(0,i._)("dd",null,[(0,i._)("div",y,[(0,i._)("div",P,[(0,i.Wm)(o,{modelValue:e.searchFields.customerFullName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.searchFields.customerFullName=t),onKeyup:t[3]||(t[3]=(0,n.D2)((t=>e.handleSearch()),["enter"])),class:"",placeholder:e.$t("cib201001sc00.placeholder.enter_the_customer_name"),disabled:"read"==e.operationMode||"approval"==e.operationMode},null,8,["modelValue","placeholder","disabled"])])])])])]),(0,i._)("div",C,[(0,i._)("dl",N,[(0,i._)("dt",null,(0,s.zw)(e.$t("cib201001sc00.business_no")),1),(0,i._)("dd",null,[(0,i._)("div",f,[(0,i._)("div",w,[(0,i.Wm)(o,{modelValue:e.searchFields.businessNo,"onUpdate:modelValue":t[4]||(t[4]=t=>e.searchFields.businessNo=t),onKeyup:t[5]||(t[5]=(0,n.D2)((t=>e.handleSearch()),["enter"])),class:"",placeholder:e.$t("cib201001sc00.placeholder.enter_the_business_no"),disabled:"read"==e.operationMode||"approval"==e.operationMode},null,8,["modelValue","placeholder","disabled"])])])])])])]),(0,i._)("div",v,[(0,i._)("div",I,[(0,i.Wm)(M,{onClick:t[6]||(t[6]=t=>e.handleSearch("search")),class:"btn01",disabled:"read"==e.operationMode||"approval"==e.operationMode},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,s.zw)(e.$t("common.search")),1)])),_:1},8,["disabled"]),(0,i.Wm)(M,{onClick:e.resetForm,class:"btn_refresh",disabled:"read"==e.operationMode||"approval"==e.operationMode},{default:(0,i.w5)((()=>[(0,i._)("span",null,(0,s.zw)(e.$t("common.reset")),1)])),_:1},8,["onClick","disabled"])])]),(0,i.Wm)(W,{data:e.customerInfo},null,8,["data"]),(0,i._)("div",k,[(0,i._)("div",S,[(0,i._)("table",D,[$,(0,i._)("thead",x,[(0,i._)("tr",null,[(0,i._)("th",null,[(0,i.Wm)(L,{onIonChange:t[7]||(t[7]=t=>e.handleAllChecked()),modelValue:e.isAllChecked,"onUpdate:modelValue":t[8]||(t[8]=t=>e.isAllChecked=t),disabled:"read"==e.operationMode||"approval"==e.operationMode},null,8,["modelValue","disabled"])]),(0,i._)("th",null,[(0,i._)("span",null,(0,s.zw)(e.$t("common.no"))+".",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.headers,(e=>((0,i.wg)(),(0,i.iD)("th",null,[(0,i._)("span",null,(0,s.zw)(e.columnName),1)])))),256))])]),(0,i._)("tbody",T,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.dataTable,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{id:`row-${e.startingIndex+a}`,onClick:t=>e.$util.rowFocus(`row-${e.startingIndex+a}`)},[(0,i._)("td",null,[(0,i.Wm)(L,{onIonChange:a=>e.handleChecked(t),modelValue:t.checked,"onUpdate:modelValue":e=>t.checked=e,disabled:"read"==e.operationMode||"approval"==e.operationMode},null,8,["onIonChange","modelValue","onUpdate:modelValue","disabled"])]),(0,i._)("td",null,[(0,i._)("span",null,(0,s.zw)(e.startingIndex+a),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,s.zw)(t.userID),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,s.zw)(t.customerCorpIndTypeCode),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,s.zw)(`${t.serviceStatusCode} : ${this.$codeConverter.convertValue("ServiceStatusCode",t.serviceStatusCode)}`),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,s.zw)(t.applicationDate),1)]),(0,i._)("td",null,[(0,i._)("span",null,(0,s.zw)(t.terminationDate),1)])],8,F)))),256))])]),(0,i._)("div",{class:(0,s.C_)([0!==e.dataTable.length?"none":"","no_data"])},V,2)]),(0,i.Wm)(B,{totalCount:e.totalItems,perPage:e.pageSize,resetPage:e.resetPage,onGetPageNumber:e.handlePagination,onGetStartingIndex:e.handleStartingIndex},null,8,["totalCount","perPage","resetPage","onGetPageNumber","onGetStartingIndex"])])]),"normal"==e.operationMode?((0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("div",q,[(0,i.Wm)(M,{onClick:e.handleUnsubscribe,class:"btn01 btn_ico"},{default:(0,i.w5)((()=>[A])),_:1},8,["onClick"])])])):(0,i.kq)("",!0),"normal"!==e.operationMode?((0,i.wg)(),(0,i.j4)(U,{key:1,payload:e.approvalRes},null,8,["payload"])):(0,i.kq)("",!0)])}}}]);
//# sourceMappingURL=5501.fc704f30.js.map